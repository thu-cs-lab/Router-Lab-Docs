## 互联评测

第三部分是针对多人的互联测试，每次测试采用五位同学的代码，分别运行在五个网络设备上。为了完成互联评测，你需要使用同一份代码完成至少两次评测，且评测中其余四名同学不能出现重复，即共挑选八名同学，将你的代码分别与前四名和后四名同学联网进行评测。

最后，你需要在 TANLabs 上标记 master 分支上的最终版本，以及该版本的代码的两次评测记录，要求评测中其他同学不出现重复。

评测的网络拓扑如下：

![](./img/topology_group.png)

- PC1: 运行第一名同学的 TFTP 客户端
- R1: 运行第二名同学的 DHCPv6 路由器
- R2: 运行第三名同学的 RIPng 路由器
- R3: 运行第四名同学的 RIPng 路由器
- PC2: 运行第五名同学的 TFTP 服务器

其中 R2 除了直连路由以外，还需要添加一条静态路由：

```
fd00::1:0/112 via fd00::3:1 dev r2r1
```

## 测试方法

测试方法：

1. 配置网络拓扑，在 R1 R2 R3 PC2 上分别运行后四位同学的程序；
2. （20% 分数）在 PC1 上运行 `dhcpcd` 命令获取动态 IPv6 地址，如果没有分配成功，则跳过以下测试项目，直接记为失败；
3. 等待 RIPng 协议运行一段时间，一分钟后进行评测。
4. （20% 分数）在 PC1 上 `ping fd00::3:2` 若干次，测试 ICMP 连通性。
5. （20% 分数）在 PC1 上 `ping fd00::5:1 -t 3`，应当出现 `Time Exceeded` 的 ICMPv6 响应。
6. （15% 分数）测试第一位同学写的 TFTP 客户端从第五位同学写的 TFTP 服务端下载文件，在 PC2 上创建文件 `test6`，在 PC1 上运行 `client get fd00::5:1 test6`，判断 PC1 上 `test6` 内容是否与 PC2 上一致。
7. （15% 分数）测试第一位同学写的 TFTP 客户端向第五位同学写的 TFTP 服务端上传文件，在 PC1 上创建文件 `test7`，在 PC1 上运行 `client put fd00::5:1 test7`，判断 PC2 上 `test7` 内容是否与 PC1 上一致。
8. （10% 分数）测试第一位同学写的 TFTP 客户端向第五位同学写的 TFTP 服务端下载文件的性能（根据端到端 wall time 时间计算）

由于性能会计入分数，请在通过所有功能测试后，检查一下是否删除了不必要的影响性能的调试代码。

??? warning "容易出错的地方"


??? tip "提升转发性能的方法"


??? tip "支持较大路由表的方法"


!!! tips "第三阶段实验是怎么设计出来的？"

